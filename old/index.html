<!DOCTYPE html>
<html>
<head>
	<style>
		svg {
			background-color: yellow;
		}
		
		line {
			stroke: red;
		}
		
		circle.player1 {
			fill: blue;
		}
		
		circle.player2 {
			fill: green;
		}
	</style>
	
	<script>
		var svg;
		var ignore = false;
		var player = 1;

		var vertices = [];
		
		function initialize() {
			svg	= document.getElementsByTagName('svg')[0]
		}
	
		function on_svg_click(evt) {
			if (ignore)
				return;
			
			// Prevent multiple events
			ignore = true;
			
		    var e = evt.target;
			var dim = e.getBoundingClientRect();
			var x = evt.clientX - dim.left;
			var y = evt.clientY - dim.top;
			
			placePoint(x, y);
			
			// switch players
			if (player == 1) {
				player = 2;
			} else {
				player = 1;
			}
			
			// Release event block
			ignore = false;
		}
	
		function placePoint(x, y) {
		
			var element = document.createElementNS("http://www.w3.org/2000/svg", 'circle'); 
			element.setAttribute("cx", x);
			element.setAttribute("cy", y);
			element.setAttribute("r", 5);
			element.setAttribute("class", "player" + player);
			
			svg.appendChild(element);
		
			var vertex = {player:player, x:x, y:y};
			vertices.push(vertex);
		}
		
		function Triangulation() {
			var status = [];
			var events = [];
			
			// Push all events to the event queue
			for (var i = 0; i < vertices.length; i++) {
				events.push(vertices[i]);
			}		

			// Sort event descending by y value
			events.sort(function(a, b){return a.y-b.y})
			
			// Sweep line
			var line = document.createElementNS("http://www.w3.org/2000/svg", 'line'); 
			svg.appendChild(line);
			for (var i = 0; i < events.length; i++) {
				var event = events[i];
				
				line.setAttribute("x1", 0);
				line.setAttribute("x2", 800);
				line.setAttribute("y1", event.y);
				line.setAttribute("y2", event.y);			
				
				console.log(event.y);
			}		
			
			// Debug event queue
			console.log(events);
			
			//alert("Triangulate BITCH!");
		}
				
		function DelaunayTriangulation() {
			
		}
	</script>
</head>


<body onload="initialize()">
<button type="button" onclick="Triangulation()" >Triangulate</button>
<svg id="panel" width="600px" height="400px" onclick="on_svg_click(evt)">

</svg>
</body>

</html>